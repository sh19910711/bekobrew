CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(bekobrew)

INCLUDE(CheckIncludeFiles)
INCLUDE(ExternalProject)

SET(JANSSON_BUILD_DOCS "OFF")
EXTERNALPROJECT_ADD(jansson
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson"
  BINARY_DIR "${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson/build"
  INSTALL_DIR "${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson/build"
  CMAKE_COMMAND cmake ..
  BUILD_COMMAND ""
  INSTALL_COMMAND "")

CHECK_INCLUDE_FILES (stdint.h HAVE_STDINT_H)
FILE(GLOB SOURCES src/*.c src/*/*.c)
INCLUDE_DIRECTORIES(src/)
FILE(GLOB JANSSON_SOURCES vendor/jansson/src/*.c)
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson/include")
ADD_EXECUTABLE(bekobrew ${SOURCES} ${JANSSON_SOURCES})

INSTALL(TARGETS bekobrew
  RUNTIME DESTINATION bin/)
