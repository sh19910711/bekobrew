CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(bekobrew)

INCLUDE(ExternalProject)

SET(JANSSON_BUILD_DOCS OFF)
EXTERNALPROJECT_ADD(jansson
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson"
  BINARY_DIR "${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson/build"
  INSTALL_DIR "${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson/build"
  CMAKE_COMMAND cmake ..
  BUILD_COMMAND ""
  INSTALL_COMMAND "")
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson")
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/vendor/jansson/include")

FILE(GLOB SOURCES src/*.c src/*/*.c)
ADD_EXECUTABLE(bekobrew ${SOURCES})
INCLUDE_DIRECTORIES(src/)
INSTALL(TARGETS bekobrew
  RUNTIME DESTINATION bin/)
